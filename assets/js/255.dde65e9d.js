(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{820:function(t,e,r){"use strict";r.r(e);var a=r(14),o=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"http-proxy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#http-proxy"}},[t._v("#")]),t._v(" Http Proxy")]),t._v(" "),r("p",[t._v("æœ¬åœ°ä»£ç†å…¶å®æœ‰ä¸¤ç§æ–¹å¼ï¼š")]),t._v(" "),r("h4",{attrs:{id:"æ–¹å¼-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼-1"}},[t._v("#")]),t._v(" æ–¹å¼ 1")]),t._v(" "),r("p",[t._v("1ã€ç¬¬ä¸€ç§æœ¬åœ°ä»£ç†æ–¹å¼ï¼Œæ¯”å¦‚ devServer ä½¿ç”¨ "),r("a",{attrs:{href:"https://github.com/chimurai/http-proxy-middleware#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("http-proxy-middleware"),r("OutboundLink")],1),t._v("ï¼Œæœ¬åœ°èµ·ä»£ç†æœåŠ¡å™¨ httpProxyï¼Œæµè§ˆå™¨å‘å‡º ajax è¯·æ±‚æ—¶ï¼Œæ¯”å¦‚è¯·æ±‚ example.com/abcï¼Œå®é™…æ˜¯è¯·æ±‚åˆ° localhost:3000ã€‚å†ç”± httpProxy åšä»£ç†è½¬å‘åˆ° example.com/abc è·å–æ•°æ®ï¼Œä»è€Œç»•è¿‡æµè§ˆå™¨è·¨åŸŸé™åˆ¶ã€‚")]),t._v(" "),r("p",[t._v("è¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸‹ "),r("code",[t._v("changeOrigin")]),t._v(" é…ç½®é¡¹ï¼Œå®ƒçš„ä½œç”¨"),r("strong",[t._v("å¹¶ä¸æ˜¯ä¸ºäº†è§£å†³è·¨åŸŸé—®é¢˜ï¼Œè€Œæ˜¯å»æ”¹å˜è¯·æ±‚ header ä¸­çš„ host å€¼ä¸º target åœ°å€")]),t._v("ã€‚å…¶ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯"),r("code",[t._v("è™šæ‹Ÿä¸»æœºæŠ€æœ¯ä¸­å• IP å¤šåŸŸå")]),t._v("çš„æƒ…å†µï¼ˆğŸ’¡ Tip: Set the option changeOrigin to true for "),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Virtual_hosting#Name-based",target:"_blank",rel:"noopener noreferrer"}},[t._v("name-based virtual hosted sites"),r("OutboundLink")],1),t._v(".ï¼‰")]),t._v(" "),r("ul",[r("li",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ localhost å°†è¯·æ±‚è½¬å‘åˆ° example.com æ—¶ï¼Œå› ä¸º changeOrigin ä¸º falseï¼Œæ‰€ä»¥ä¼šå¸¦è¯·æ±‚å¤´ä¸º host: localhost:3000ã€‚æ­¤æ—¶å¦‚æœç›®æ ‡æœåŠ¡å™¨æ˜¯å¤šè™šæ‹Ÿæœºçš„æƒ…å†µï¼Œåˆ™å› ä¸ºæ²¡æœ‰æŒ‡å®šæ­£ç¡®çš„ host è€Œå¯¼è‡´æ‰¾ä¸åˆ°æœåŠ¡ï¼Œè€Œè¿”å› 404ï¼›")]),t._v(" "),r("li",[t._v("å¦‚æœè®¾ç½® changeOrigin: trueï¼Œå½“ localhost å°†è¯·æ±‚è½¬å‘åˆ° example.com æ—¶ï¼Œä¼šå¸¦è¯·æ±‚å¤´ä¸º host: example.comï¼Œå³æŒ‡å‘ targetã€‚æ­¤æ—¶å°±èƒ½æ­£å¸¸è®¿é—®å¯¹åº”æœåŠ¡ã€‚")]),t._v(" "),r("li",[t._v("å½“ç„¶ï¼Œå¦‚æœç›®æ ‡æœåŠ¡å™¨ä¸å­˜åœ¨å¤šè™šæ‹Ÿæœºçš„æƒ…å†µï¼Œå¹¶ä¸”åç«¯åº”ç”¨é€»è¾‘æ— éœ€æ ¡éªŒæŒ‡å®šè¯·æ±‚çš„ URLï¼Œä¹Ÿå¯ä»¥å¿½ç•¥ä¸è®¾ç½® changeOriginã€‚")])]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("è™šæ‹Ÿä¸»æœºæŠ€æœ¯")]),t._v(" "),r("p",[t._v("ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸»è¦åº”ç”¨åœ¨è™šæ‹Ÿä¸»æœºæŠ€æœ¯ä¸Šã€‚è™šæ‹Ÿä¸»æœºï¼ˆvirtual hostingï¼‰å³å…±äº«ä¸»æœºï¼ˆshared web hostingï¼‰ï¼Œå¯ä»¥åˆ©ç”¨è™šæ‹ŸæŠ€æœ¯æŠŠä¸€å°å®Œæ•´çš„æœåŠ¡å™¨åˆ†æˆè‹¥å¹²ä¸ªä¸»æœºï¼Œå› æ­¤å¯ä»¥åœ¨å•ä¸€ä¸»æœºä¸Šè¿è¡Œå¤šä¸ªç½‘ç«™æˆ–æœåŠ¡ã€‚")]),t._v(" "),r("p",[t._v("æ¯”å¦‚è¯´æœ‰ä¸€å° ip åœ°å€ä¸º 11.11.11.11 çš„æœåŠ¡å™¨ï¼Œåœ¨è¿™å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²ç€æ·˜å®ã€äº¬ä¸œã€æ‹¼å¤šå¤šçš„ç½‘ç«™ï¼Œå¹¶ä¸”é…ç½®äº†ä¸‰ä¸ªè™šæ‹Ÿä¸»æœºï¼ša.com, b.com, c.com, è¿™ä¸‰ä¸ªåŸŸåéƒ½æŒ‡å‘ 11.11.11.11ã€‚ å½“æˆ‘ä»¬è®¿é—® c.com çš„ç½‘ç«™æ—¶ï¼Œçœ‹åˆ°çš„æ˜¯æ‹¼å¤šå¤šçš„é¡µé¢è€Œä¸æ˜¯æ·˜å®å’Œäº¬ä¸œçš„é¡µé¢ï¼ŒåŸå› å°±æ˜¯ Host è¯·æ±‚å¤´å†³å®šç€è®¿é—®å“ªä¸ªè™šæ‹Ÿä¸»æœºã€‚")])]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("è·¨åŸŸçš„åˆ¤æ–­åŸç†")]),t._v(" "),r("p",[t._v("é¦–å…ˆè¦æ˜ç¡®ï¼Œè·¨åŸŸçš„åˆ¤æ–­æ˜¯ç”±æµè§ˆå™¨å®Œæˆçš„ï¼Œä¸æ˜¯æœåŠ¡ç«¯ã€‚")]),t._v(" "),r("ul",[r("li",[t._v("æµè§ˆå™¨å…ˆæ ¹æ®åŒæºç­–ç•¥å¯¹å‰ç«¯ origin å’Œè¯·æ±‚çš„ target åšåŒ¹é…ï¼Œè‹¥åŒæºï¼Œåˆ™ç›´æ¥å‘é€æ•°æ®è¯·æ±‚ï¼›è‹¥ä¸åŒæºï¼Œåˆ™å‘é€è·¨åŸŸè¯·æ±‚ã€‚")]),t._v(" "),r("li",[t._v("æœåŠ¡å™¨è§£æç¨‹åºæ”¶åˆ°æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æ—¶ï¼Œè‹¥æœªé…ç½®è¿‡ä»»ä½•å…è®¸è·¨åŸŸçš„é…ç½®ï¼Œåˆ™å“åº” header ä¸­ä¸åŒ…å« Access-Control-Allow-origin å­—æ®µï¼Œè‹¥æœ‰è·¨åŸŸé…ç½®ï¼Œåˆ™è¿”å› Access-Control-Allow-origin+ å¯¹åº”é…ç½®è§„åˆ™é‡Œçš„åŸŸåçš„æ–¹å¼ã€‚")]),t._v(" "),r("li",[t._v("æµè§ˆå™¨æ˜¯æ˜ç¡®çŸ¥é“è‡ªå·±è¯·æ±‚ header çš„ origin çš„ï¼Œé¦–å…ˆå‘é€é¢„æ£€è¯·æ±‚åˆ¤æ–­è·¨åŸŸï¼Œå½“æ”¶åˆ° http å“åº”æ—¶ï¼Œå‘ç°å“åº” header ä¸­æ²¡æœ‰ Access-Control-Allow-origin å­—æ®µï¼Œè¯´æ˜ä¸å…è®¸è·¨åŸŸï¼Œåˆ™æŠ¥è·¨åŸŸé”™è¯¯ï¼›è‹¥æœ‰ Access-Control-Allow-origin å­—æ®µï¼Œåˆ™å¯¹å­—æ®µå†…å®¹å’Œå½“å‰åŸŸåï¼ˆå³è¯·æ±‚ header çš„ originï¼‰åšæ¯”å¯¹ï¼Œå¦‚æœåŒæºï¼Œåˆ™è¯´æ˜å¯ä»¥è·¨åŸŸï¼Œæµè§ˆå™¨å‘é€çœŸå®è¯·æ±‚ï¼›è‹¥ä¸åŒæºï¼Œåˆ™è¯´æ˜è¯¥åŸŸåä¸å¯è·¨åŸŸï¼Œä¸å‘é€çœŸå®è¯·æ±‚ã€‚")])])]),t._v(" "),r("h4",{attrs:{id:"æ–¹å¼-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼-2"}},[t._v("#")]),t._v(" æ–¹å¼ 2")]),t._v(" "),r("p",[t._v("2ã€ç¬¬äºŒç§æœ¬åœ°ä»£ç†æ–¹å¼æ˜¯ç±»ä¼¼ charles èµ·ä»£ç†ï¼Œå½“æµè§ˆå™¨è®¿é—®ä¸€ä¸ªåœ°å€æ¯”å¦‚ example.com æ—¶ï¼Œå°†å…¶åŠ«æŒï¼Œå¹¶åšä¸€äº›è®¿é—®æ§åˆ¶ã€‚")]),t._v(" "),r("h2",{attrs:{id:"å‚è€ƒé“¾æ¥"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒé“¾æ¥"}},[t._v("#")]),t._v(" å‚è€ƒé“¾æ¥")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000003710973",target:"_blank",rel:"noopener noreferrer"}},[t._v("æµè§ˆå™¨å’ŒæœåŠ¡å™¨å®ç°è·¨åŸŸï¼ˆCORSï¼‰åˆ¤å®šçš„åŸç†"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://marskid.net/2018/01/13/webpack-devserver-proxy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack ä»£ç†è¿”å› 404ï¼ŒchangeOrigin çš„åŸç†"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.cnblogs.com/houxianzhou/p/14743623.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack Proxy å·¥ä½œåŸç†ï¼Ÿä¸ºä»€ä¹ˆèƒ½è§£å†³è·¨åŸŸ?"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://juejin.cn/post/6844903954455724045#heading-7",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP headers ä¹‹ host, referer, origin"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=o.exports}}]);