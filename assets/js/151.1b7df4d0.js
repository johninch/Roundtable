(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{690:function(a,s,t){"use strict";t.r(s);var e=t(14),v=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"_2ã€koa2æºç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€koa2æºç "}},[a._v("#")]),a._v(" 2ã€Koa2æºç ")]),a._v(" "),t("h2",{attrs:{id:"è¯¾ç¨‹ç›®æ ‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯¾ç¨‹ç›®æ ‡"}},[a._v("#")]),a._v(" è¯¾ç¨‹ç›®æ ‡")]),a._v(" "),t("ol",[t("li",[a._v("æ‰‹å†™koa")]),a._v(" "),t("li",[a._v("æ‰‹å†™staticä¸­é—´ä»¶")])]),a._v(" "),t("h3",{attrs:{id:"æ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°"}},[a._v("#")]),a._v(" æ¦‚è¿°")]),a._v(" "),t("p",[a._v("æ¦‚è¿°ï¼šKoa æ˜¯ä¸€ä¸ªæ–°çš„ web æ¡†æ¶ï¼Œè‡´åŠ›äºæˆä¸º web åº”ç”¨å’Œ API å¼€å‘é¢†åŸŸä¸­çš„ä¸€ä¸ªæ›´å°ã€æ›´å¯Œæœ‰ è¡¨ç°åŠ›ã€æ›´å¥å£®çš„åŸºçŸ³ã€‚\nkoaæ˜¯Expressçš„ä¸‹ä¸€ä»£åŸºäºNode.jsçš„webæ¡†æ¶ koa2å®Œå…¨ä½¿ç”¨Promiseå¹¶é…åˆ async æ¥å®ç°å¼‚æ­¥ã€‚")]),a._v(" "),t("ul",[t("li",[a._v("Expressä¸‹ä¸€ä»£webæ¡†æ¶")]),a._v(" "),t("li",[a._v("v1ï¼šES6 generator")]),a._v(" "),t("li",[a._v("v2ï¼šES7 async/await")])]),a._v(" "),t("h3",{attrs:{id:"ç‰¹ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç‰¹ç‚¹"}},[a._v("#")]),a._v(" ç‰¹ç‚¹")]),a._v(" "),t("ul",[t("li",[a._v("ğŸš€ä¼˜é›…çš„APIè®¾è®¡ï¼ˆctx.bodyç›´æ¥èµ‹å€¼è¿”å›ï¼Œå¯è‡ªåŠ¨è¯†åˆ«jsonç­‰æ•°æ®æ ¼å¼ï¼Œå¢åŠ åˆ°å“åº”å¤´ä¸­ï¼‰")]),a._v(" "),t("li",[a._v("ğŸš€ä¸­é—´ä»¶æœºåˆ¶ï¼ˆæ´‹è‘±åœˆæ¨¡å‹ï¼‰")]),a._v(" "),t("li",[a._v("å¢å¼ºçš„é”™è¯¯å¤„ç†")]),a._v(" "),t("li",[a._v("è½»é‡ï¼Œæ— æ†ç»‘")])]),a._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("åŸç”Ÿhttpçš„ä¸è¶³æ˜¯ä»€ä¹ˆï¼Ÿ")]),a._v(" "),t("ol",[t("li",[a._v("ä»¤äººå›°æƒ‘çš„requestå’Œresponseï¼Œå³apiä¸å¤Ÿä¼˜é›…\n"),t("ul",[t("li",[a._v("res.endï¼Œres.writeHeadç­‰apiè®¾è®¡å¾ˆæ™¦æ¶©ï¼Œres.endè¦æ±‚å¯¹æµçš„æ¦‚å¿µæœ‰å¥½çš„è®¤è¯†ï¼Œè€ŒwriteHeadä¹Ÿä¸å¤Ÿç›´æ¥ã€‚")])])]),a._v(" "),t("li",[a._v("æ— æ³•æè¿°å¤æ‚ä¸šåŠ¡é€»è¾‘\n"),t("ul",[t("li",[a._v("ç‰¹åˆ«æ˜¯å¯¹äºåˆ‡é¢ç¼–ç¨‹è¡¨è¿°AOPæ¥è¯´ï¼Œä¸å¤Ÿé¡ºç•…")]),a._v(" "),t("li",[a._v("æ¯”å¦‚"),t("code",[a._v("ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè·¯ç”±å®ˆå«ï¼Œéƒ½æ˜¯ä¸ºäº†æ»¡è¶³AOPçš„ç¼–ç¨‹éœ€è¦")])])])])]),a._v(" "),t("p",[t("strong",[a._v("å› æ­¤ï¼ŒKoa2æä¾›çš„ã€Œä¼˜é›…çš„APIè®¾è®¡ã€ï¼Œã€Œä¸­é—´ä»¶æœºåˆ¶ã€å°±åˆ†åˆ«è§£å†³äº†ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ã€‚")])])]),a._v(" "),t("p",[a._v("::: tips Ioc ä¸ AOP æ¦‚å¿µ\næ¥æºäºSpringçš„æ¦‚å¿µï¼ŒSpringçš„æ ¸å¿ƒæ˜¯"),t("code",[a._v("æ§åˆ¶åè½¬ï¼ˆIoC")]),a._v(", Inversion of Control ï¼‰å’Œ"),t("code",[a._v("é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOP")]),a._v(", Aspect Oriented Programmingï¼‰ã€‚\n:::")]),a._v(" "),t("h3",{attrs:{id:"ä¸­é—´ä»¶æœºåˆ¶-æ´‹è‘±åœˆæ¨¡å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸­é—´ä»¶æœºåˆ¶-æ´‹è‘±åœˆæ¨¡å‹"}},[a._v("#")]),a._v(" ä¸­é—´ä»¶æœºåˆ¶ï¼ˆæ´‹è‘±åœˆæ¨¡å‹ï¼‰")]),a._v(" "),t("p",[a._v("Koaä¸­é—´ä»¶æœºåˆ¶ï¼šKoaä¸­é—´ä»¶æœºåˆ¶å°±æ˜¯å‡½æ•°å¼ ç»„åˆæ¦‚å¿µ Composeçš„æ¦‚å¿µï¼Œå°†ä¸€ç»„éœ€è¦é¡ºåºæ‰§è¡Œçš„ å‡½æ•°å¤åˆä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå¤–å±‚å‡½æ•°çš„å‚æ•°å®é™…æ˜¯å†…å±‚å‡½æ•°çš„è¿”å›å€¼ã€‚æ´‹è‘±åœˆæ¨¡å‹å¯ä»¥å½¢è±¡è¡¨ç¤ºè¿™ç§æœºåˆ¶ï¼Œæ˜¯æºç ä¸­çš„ç²¾é«“å’Œéš¾ç‚¹ã€‚")]),a._v(" "),t("p",[a._v("useå°±æ˜¯ç­–ç•¥æ¨¡å¼ï¼Œè€Œnextæ˜¯è´£ä»»é“¾æ¨¡å¼")]),a._v(" "),t("h2",{attrs:{id:"æ¯”è¾ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¯”è¾ƒ"}},[a._v("#")]),a._v(" æ¯”è¾ƒ")]),a._v(" "),t("p",[a._v("åœ¨koaä¸­ï¼Œä¸€åˆ‡çš„æµç¨‹éƒ½æ˜¯ä¸­é—´ä»¶ï¼Œæ•°æ®æµå‘éµå¾ªæ´‹è‘±æ¨¡å‹ï¼Œå…ˆå…¥åå‡ºï¼Œæ˜¯æŒ‰ç…§ç±»ä¼¼å †æ ˆçš„æ–¹å¼ç»„ç»‡å’Œæ‰§è¡Œçš„ï¼Œkoa-composeæ˜¯ç†è§£koaä¸­é—´ä»¶çš„å…³é”®ï¼Œåœ¨koaä¸­é—´ä»¶ä¸­ä¼šæ·±å…¥åˆ†æã€‚")]),a._v(" "),t("p",[a._v("koa2ä¸koa1çš„æœ€å¤§åŒºåˆ«æ˜¯koa2å®ç°å¼‚æ­¥æ˜¯é€šè¿‡async/awaitï¼Œkoa1å®ç°å¼‚æ­¥æ˜¯é€šè¿‡generator/yieldï¼Œè€Œexpresså®ç°å¼‚æ­¥æ˜¯é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼ã€‚")]),a._v(" "),t("p",[a._v("koa2ä¸express æä¾›çš„APIå¤§è‡´ç›¸åŒï¼Œexpressæ˜¯å¤§è€Œå…¨ï¼Œå†…ç½®äº†å¤§å¤šæ•°çš„ä¸­é—´ä»¶ï¼Œæ›´è®©äººçœå¿ƒï¼Œkoa2ä¸ç»‘å®šä»»ä½•çš„æ¡†æ¶ï¼Œå¹²å‡€ç®€æ´ï¼Œå°è€Œç²¾ï¼Œæ›´å®¹æ˜“å®ç°å®šåˆ¶åŒ–ï¼Œæ‰©å±•æ€§å¥½ã€‚")]),a._v(" "),t("p",[a._v("expressæ˜¯æ²¡æœ‰æä¾›ctxæ¥æä¾›ä¸Šä¸‹æµæœåŠ¡ï¼Œéœ€è¦æ›´å¤šçš„æ‰‹åŠ¨å¤„ç†ï¼Œexpressæœ¬èº«æ˜¯ä¸æ”¯æŒæ´‹è‘±æ¨¡å‹çš„æ•°æ®æµå…¥æµå‡ºèƒ½åŠ›çš„ï¼Œéœ€è¦å¼•å…¥å…¶ä»–çš„æ’ä»¶ã€‚")]),a._v(" "),t("p",[a._v("koaçš„æ•°æ®æµå…¥æµå‡ºï¼Œnext()åï¼Œä¼šè¿›å…¥ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å¹¶æ‰§è¡Œï¼Œç„¶åä»æœ€åä¸€ä¸ªä¸­é—´ä»¶åå‘æ‰§è¡Œã€‚")])])}),[],!1,null,null,null);s.default=v.exports}}]);