(window.webpackJsonp=window.webpackJsonp||[]).push([[314],{912:function(t,s,a){"use strict";a.r(s);var r=a(14),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-router路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router路由"}},[t._v("#")]),t._v(" vue-router路由")]),t._v(" "),a("h2",{attrs:{id:"vue-router模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router模式"}},[t._v("#")]),t._v(" vue-router模式")]),t._v(" "),a("p",[t._v("传送门:"),a("RouterLink",{attrs:{to:"/Question-Bank/bom/router.html#前端路由模式"}},[t._v("前端路由模式")])],1),t._v(" "),a("ul",[a("li",[t._v("hash：使用 URL hash 值来作路由。支持所有浏览器，包括不支持 HTML5 History Api 的浏览器；")]),t._v(" "),a("li",[t._v("history：依赖 HTML5 History API 和服务器配置。具体可以查看 HTML5 History 模式；")]),t._v(" "),a("li",[t._v("abstract：支持所有 JavaScript 运行环境，如 Node.js 服务器端。如果发现没有浏览器的 API，路由会自动强制进入这个模式。")])]),t._v(" "),a("h2",{attrs:{id:"vue-router中-route与-router的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router中-route与-router的区别"}},[t._v("#")]),t._v(" vue-router中 $route与$router的区别：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("$route")]),t._v("为当前router跳转对象，里面可以获取name、path、query、params等；")]),t._v(" "),a("li",[a("code",[t._v("$router")]),t._v("为VueRouter实例，想要导航到不同URL，则使用$router.push方法，返回上一个history使用$router.go方法。")])]),t._v(" "),a("h4",{attrs:{id:"this-router-push中使用params和使用query有什么不同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this-router-push中使用params和使用query有什么不同"}},[t._v("#")]),t._v(" this.$router.push中使用params和使用query有什么不同？")]),t._v(" "),a("p",[t._v("相同点都是带参数过去，不同点是：")]),t._v(" "),a("ul",[a("li",[t._v("params需要在路由设置中添加参数（ path: '/projectAdd/:id'），而query不需要；")]),t._v(" "),a("li",[t._v("跳转后在URL的显示不同，params显示的是（http://localhost:8082/#/projectAdd/6），query显示的是（http://localhost:8082/#/projectAdd?toseId=6）；")]),t._v(" "),a("li",[t._v("接收方式不同，params为this.$route.params，query为this.$route.query。")]),t._v(" "),a("li",[t._v("path应与query配套使用，因为提供path时，会忽略params参数；name应与params配套使用。")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字符串")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'home'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对象")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'home'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命名的路由")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 带查询参数，变成 /register?plan=private")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'register'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" plan"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'private'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("如果提供了 path，则 params 会被忽略，上述例子中的 query 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 name 或手写完整的带有参数的 path：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userId "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> /user/123")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/user/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("userId"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> /user/123")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里的 params 不生效")]),t._v("\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userId "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> /user")]),t._v("\n")])])]),a("p",[a("em",[t._v("注意")]),t._v("：如果跳转的url只是id改变，页面并不会刷新，这是因为路由是相同的，vue认为是同一个页面，从而复用已加载的页面，而不重新加载。解决办法是：通过"),a("code",[t._v("router-view")]),a("strong",[t._v("动态绑定key值")]),t._v("，这样当重新跳转的时候因为key值不同，那么vue在路由切换时都会重新渲染触发钩子了。")]),t._v(" "),a("h2",{attrs:{id:"vue-router导航守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router导航守卫"}},[t._v("#")]),t._v(" vue-router导航守卫")]),t._v(" "),a("h3",{attrs:{id:"路由拦截-路由元信息与导航守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由拦截-路由元信息与导航守卫"}},[t._v("#")]),t._v(" 路由拦截（路由元信息与导航守卫）")]),t._v(" "),a("p",[a("strong",[t._v("路由拦截")]),t._v("的主要作用是提供"),a("code",[t._v("权限控制")]),t._v("，比如有的页面需要登录了才能进入，有些页面不同身份渲染不同。这里主要介绍下典型的应用：登录拦截。")]),t._v(" "),a("ul",[a("li",[t._v("首先在定义路由时添加"),a("code",[t._v("路由元信息meta")]),t._v("，设置字段requireAuth的布尔值，用于判断该路由的访问是否需要登录。true则顺利进入路由，false就进入登录页面。")]),t._v(" "),a("li",[t._v("利用"),a("code",[t._v("vue-router")]),t._v("提供的"),a("code",[t._v("钩子函数router.beforeEach((to, from, next) => { })")]),t._v("对路由设置全局守卫，to是即将进入的路由对象，from是离开的路由对象，next是resolve钩子的函数，是必须被调用的。路由匹配的所有路由记录会暴露为$route对象。通过遍历$route.matched数组来检查记录中的meta字段。")])]),t._v(" "),a("h3",{attrs:{id:"导航守卫钩子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导航守卫钩子"}},[t._v("#")]),t._v(" 导航守卫钩子")]),t._v(" "),a("ul",[a("li",[t._v("全局前置/钩子：beforeEach、beforeResolve、afterEach")]),t._v(" "),a("li",[t._v("路由独享的守卫：beforeEnter")]),t._v(" "),a("li",[t._v("组件内的守卫：beforeRouteEnter、beforeRouteUpdate、beforeRouteLeave")])]),t._v(" "),a("p",[t._v("完整的导航解析流程见官网："),a("a",{attrs:{href:"https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%AF%BC%E8%88%AA%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整的导航解析流程"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);