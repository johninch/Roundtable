(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{599:function(t,s,a){t.exports=a.p+"assets/img/error-catch-1.b10b67c0.png"},600:function(t,s,a){t.exports=a.p+"assets/img/error-catch-2.31c28e63.png"},601:function(t,s,a){t.exports=a.p+"assets/img/error-catch-3.a3288f39.png"},602:function(t,s,a){t.exports=a.p+"assets/img/error-catch-4.f97e8dc6.png"},603:function(t,s,a){t.exports=a.p+"assets/img/error-catch-5.23ae1ea3.png"},931:function(t,s,a){"use strict";a.r(s);var r=a(14),n=Object(r.a)({},(function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"如何保证产品质量"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#如何保证产品质量"}},[t._v("#")]),t._v(" 如何保证产品质量")]),t._v(" "),r("h2",{attrs:{id:"错误监控"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#错误监控"}},[t._v("#")]),t._v(" 错误监控")]),t._v(" "),r("h3",{attrs:{id:"前端错误的分类"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前端错误的分类"}},[t._v("#")]),t._v(" 前端错误的分类")]),t._v(" "),r("ul",[r("li",[t._v("即时运行错误：代码错误")]),t._v(" "),r("li",[t._v("资源加载错误")])]),t._v(" "),r("h3",{attrs:{id:"错误的捕获方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#错误的捕获方式"}},[t._v("#")]),t._v(" 错误的捕获方式")]),t._v(" "),r("h4",{attrs:{id:"即时运行错误的捕获方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#即时运行错误的捕获方式"}},[t._v("#")]),t._v(" 即时运行错误的捕获方式：")]),t._v(" "),r("ul",[r("li",[t._v("try..catch..")]),t._v(" "),r("li",[t._v("window.onerror")])]),t._v(" "),r("h4",{attrs:{id:"资源加载错误的捕获方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#资源加载错误的捕获方式"}},[t._v("#")]),t._v(" 资源加载错误的捕获方式：")]),t._v(" "),r("ul",[r("li",[t._v("object.onerror 比如 img.onerror")]),t._v(" "),r("li",[t._v("performance.getEntries()：用 2 需要的去除 1 中已经加载到的资源就是加载失败的资源\n"),r("ol",[r("li",[t._v("performance.getEntries().forEach(item=>{console.log(item.name)}) 遍历出来页面中所有加载到的资源；")]),t._v(" "),r("li",[t._v("document.getElementsByTagName('img') 拿到所有需要的某种需要的资源")])])]),t._v(" "),r("li",[t._v("Error 事件捕获\n"),r("img",{attrs:{src:a(599),alt:""}}),t._v(" "),r("ul",[r("li",[t._v("true 代表事件捕获，通过一个 script 标签加载一个不存在的文件，即可捕获该事件错误\n"),r("img",{attrs:{src:a(600),alt:""}})]),t._v(" "),r("li",[t._v("如果是 false，也就是事件冒泡，只报错但获取不到该错误\n"),r("img",{attrs:{src:a(601),alt:""}})])])])]),t._v(" "),r("h4",{attrs:{id:"延伸-跨域的-js-运行错误可以捕获吗-错误提示是什么-应该怎么处理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#延伸-跨域的-js-运行错误可以捕获吗-错误提示是什么-应该怎么处理"}},[t._v("#")]),t._v(" 延伸：跨域的 js 运行错误可以捕获吗，错误提示是什么，应该怎么处理?")]),t._v(" "),r("p",[r("img",{attrs:{src:a(602),alt:""}})]),t._v(" "),r("p",[t._v("可以捕获，但是只能知道 script error，但无法拿到行号列号。通常跨域的异常信息会被忽略，不会上报。处理方法是：")]),t._v(" "),r("ol",[r("li",[t._v("在客户端 script 标签增加 crossorigin 属性；")])]),t._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[r("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://sub.domain.com/script.js"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),r("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[r("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("anonymous"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),r("span",{pre:!0,attrs:{class:"token script"}}),r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),r("ol",{attrs:{start:"2"}},[r("li",[t._v("在服务端设置 js 资源响应头 Access-Control-Allow-Origin: *")])]),t._v(" "),r("p",[t._v("就可以拿到具体的跨域的 js 运行错误了。")]),t._v(" "),r("h3",{attrs:{id:"错误上报的常用方法与原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#错误上报的常用方法与原理"}},[t._v("#")]),t._v(" 错误上报的常用方法与原理")]),t._v(" "),r("ol",[r("li",[t._v("采用 Ajax 通信的方式上报(但实际中没人用这种方式)；")]),t._v(" "),r("li",[t._v("利用 Image 对象上报(实际应用中的错误上报方式。利用这种方式非常简单，比 ajax 简单，且无需第三方的库)；")])]),t._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[r("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),r("span",{pre:!0,attrs:{class:"token script"}},[r("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过赋值图片src确定错误上报地址")]),t._v("\n\t"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Image")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://baidu.com/testjk?r=tksjk"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),r("p",[r("img",{attrs:{src:a(603),alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);